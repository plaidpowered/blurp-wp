"use strict";var blurpImages=null;function blurpImgLoaded(e){this.parentNode.classList.add("loaded"),window.setTimeout(blurpRemoveOldBackground,800,this.parentNode)}function blurpRemoveOldBackground(e){e.style.backgroundImage=""}function blurpSwapImages(e){for(var n,l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,t=0;t<e.length;t+=1)e[t].classList.contains("seen")||-100<(n=e[t].getBoundingClientRect()).bottom&&n.top<l+100&&(e[t].classList.add("seen"),blurpSwapImage(e[t]))}function blurpSwapImage(e){var n=document.createElement("img"),l=(e.dataset.src||"")+"",t=(e.dataset.srcset||"")+"",o=(e.dataset.sizes||"")+"",r=e.parentNode;"FIGURE"===r.tagName&&r.classList.add("uses-blurp"),e.classList.contains("webp-ok")&&window.webpOk&&(l+=".webp",t=t.replace(/\.(jpg|png)/g,".$1.webp")),0<l.length&&(n.src=l),0<t.length&&(n.srcset=t),0<o.length&&(n.sizes=o),n.addEventListener("load",blurpImgLoaded),e.append(n),e.classList.add("seen")}function blurpScrolled(){null===window.blurpScrollTimer&&(console.log("scroll timer fired"),blurpSwapImages(blurpImages),window.blurpScrollTimer=!0,window.setTimeout(function(e){window.blurpScrollTimer=null},100,blurpScrollTimer))}function blurpReady(){blurpImages=document.querySelectorAll(".preloaded-background"),window.addEventListener("scroll",blurpScrolled),window.blurpScrollTimer=null,blurpScrolled()}function blurpLoad(){window.webpOk=!1;var n=new Image;n.onload=function(){var e=0<n.width&&0<n.height;window.webpOk=e,blurpReady()},n.onerror=function(){window.webpOk=!1,blurpReady()},n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"}"complete"===document.readyState||"interactive"===document.readyState?blurpLoad():window.addEventListener("DOMContentLoaded",blurpLoad);